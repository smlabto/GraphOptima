# Manual Mode Setup: GraphOptima on an HPC Cluster

This tutorial guides you through setting up the Optimizer, Database Manager, and other necessary nodes to support running the GraphOptima framework in the Manual Mode on the Graham cluster managed by The Digital Research Alliance of Canada.

## Prerequisite

1. **Spawn Layout Generators:** Manually spawn a desired number of layout generators. Follow steps 5-7 in `setting_up_cugraph_layout_generator_on_compute_canada_graham_cluster_using_singularity.md`.
2. **Spawn Layout Evaluators:** Generate a desired number of layout evaluators. Follow steps 5-6 in `setting_up_glam_layout_evaluator_on_compute_canada.md`.

## Setup the Rest of the Framework

1. **Allocate Two Non-GPU Nodes:** Allocate two non-GPU nodes with at least 16Gb of memory using the following command:

    ```
    salloc --ntasks=1 --mem=16G --time=23:59:59 --account=username
    ```

   Note: Due to their memory-intensive nature, we advise against running the Optimizer and Database Manager on an HPC's login node.


2. **Run the Optimizer and Database Manager:** After allocating compute nodes, start the Optimizer and Database Manager using the following commands:

    ```
    python optimizer.py
    ```

   and

    ```
    python optimization_database.py
    ```


3. **Set Up an External API Node:** Finally, set up an External API node. The External API is neither computationally nor memory-intensive and can be safely run on a login node. Its primary function is to track notification files generated by the framework and forward system notifications via email. Open a new "screen" session, navigate to the repository, and then run `external_api.py`.

    ```
    python external_api.py
    ```



Note: In the Manual Mode, the framework will not automatically respawn itself after the job has been terminated by the Slurm task manager.
